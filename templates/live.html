<html>
<head>
	<title>Live page</title>


	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="/static/css/bootstrap.css" rel="stylesheet">
	<link href="/static/css/bootstrap-responsive.css" rel="stylesheet">
	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<script src="/static/js/bootstrap.js"></script>


	<script src="http://js.pusher.com/1.12/pusher.min.js" type="text/javascript"></script>
	<script type="text/javascript">
	    // Enable pusher logging - don't include this in production
	    Pusher.log = function(message) {
	      if (window.console && window.console.log) window.console.log(message);
	    };

	    // Flash fallback logging - don't include this in production
	    WEB_SOCKET_DEBUG = true;

	    var pusher = new Pusher('b2c9525770d59267a6a2');
	    var channel = pusher.subscribe('test_channel');
	    channel.bind('chatmessage', function(data) {
    		$(data.message).prependTo('#update').hide();
    		$('span').tooltip();
    		$('li').show(400);
	    });
	</script>


</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
		<a class="brand" href="/">LiveFPL</a>
			<a href="/live" class="btn btn-success">Refresh</a>
	</div>
</div>

<div class="container-fluid">
	<div class="row-fluid">
		<h2>status is: <span id='status'><span></h2>
			<ul id="update" class="nav nav-tabs nav-stacked">
			  {% for update in pushed_data %}
					<li>{{ update }}</li>
				{% endfor %}
			</ul>
	</div>
</div>

<script type="text/javascript">
$.get('/status', function(data) {
			$('#status').text('')
			$('#status').append(data)
});
window.setInterval(function(){
		$.get('/status', function(data) {
			if ( data != $('#status').text()) {
				$('#status').text('')
				$('#status').append(data)
			};
	});
}, 60000);
</script>
</body>
</html>